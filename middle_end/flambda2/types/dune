(include_subdirs unqualified)

; Note that the type system does not depend on Flambda2_terms.

(library
 (name flambda2_types)
 (wrapped true)
 (flags
  (:standard
   -principal
   -nostdlib
   -open
   Flambda2_algorithms
   -open
   Flambda2_bound_identifiers
   -open
   Flambda2_identifiers
   -open
   Flambda2_kinds
   -open
   Flambda2_lattices
   -open
   Flambda2_nominal
   -open
   Flambda2_numbers
   -open
   Flambda2_term_basics
   -open
   Flambda2_ui))
 (ocamlopt_flags
  (:standard -O2))
 (libraries
  stdlib
  ocamlcommon
  flambda2_algorithms
  flambda2_bound_identifiers
  flambda2_identifiers
  flambda2_kinds
  flambda2_lattices
  flambda2_nominal
  flambda2_numbers
  flambda2_term_basics
  flambda2_ui))

(rule
 (targets flambda_type.ml)
 (deps
  rec_modules
  template/flambda_type.templ.ml
  type_descr.rec.ml
  type_grammar.rec.ml
  type_of_kind/variant.rec.ml
  type_of_kind/boilerplate/type_of_kind_value.rec.ml
  type_of_kind/type_of_kind_value0.rec.ml
  type_of_kind/boilerplate/type_of_kind_naked_immediate.rec.ml
  type_of_kind/type_of_kind_naked_immediate0.rec.ml
  type_of_kind/boilerplate/type_of_kind_naked_float.rec.ml
  type_of_kind/type_of_kind_naked_float0.rec.ml
  type_of_kind/boilerplate/type_of_kind_naked_int32.rec.ml
  type_of_kind/type_of_kind_naked_int32_0.rec.ml
  type_of_kind/boilerplate/type_of_kind_naked_int64.rec.ml
  type_of_kind/type_of_kind_naked_int64_0.rec.ml
  type_of_kind/boilerplate/type_of_kind_naked_nativeint.rec.ml
  type_of_kind/type_of_kind_naked_nativeint0.rec.ml
  type_of_kind/boilerplate/type_of_kind_rec_info.rec.ml
  type_of_kind/type_of_kind_rec_info0.rec.ml
  resolved_type.rec.ml
  structures/closures_entry.rec.ml
  structures/function_declaration_type.rec.ml
  env/meet_env.rec.ml
  env/join_env.rec.ml
  env/typing_env_extension.rec.ml
  env/typing_env_level.rec.ml
  env/typing_env.rec.ml
  structures/product.rec.ml
  structures/row_like.rec.ml
  type_descr.rec.mli
  type_grammar.rec.mli
  type_of_kind/variant.rec.mli
  type_of_kind/boilerplate/type_of_kind_value.rec.mli
  type_of_kind/type_of_kind_value0.rec.mli
  type_of_kind/boilerplate/type_of_kind_naked_immediate.rec.mli
  type_of_kind/type_of_kind_naked_immediate0.rec.mli
  type_of_kind/boilerplate/type_of_kind_naked_float.rec.mli
  type_of_kind/type_of_kind_naked_float0.rec.mli
  type_of_kind/boilerplate/type_of_kind_naked_int32.rec.mli
  type_of_kind/type_of_kind_naked_int32_0.rec.mli
  type_of_kind/boilerplate/type_of_kind_naked_int64.rec.mli
  type_of_kind/type_of_kind_naked_int64_0.rec.mli
  type_of_kind/boilerplate/type_of_kind_naked_nativeint.rec.mli
  type_of_kind/type_of_kind_naked_nativeint0.rec.mli
  type_of_kind/boilerplate/type_of_kind_rec_info.rec.mli
  type_of_kind/type_of_kind_rec_info0.rec.mli
  resolved_type.rec.mli
  structures/closures_entry.rec.mli
  structures/function_declaration_type.rec.mli
  env/meet_env.rec.mli
  env/join_env.rec.mli
  env/typing_env_extension.rec.mli
  env/typing_env_level.rec.mli
  env/typing_env.rec.mli
  structures/product.rec.mli
  structures/row_like.rec.mli)
 (action
  (run
   ../scripts/assemble_rec_modules.sh
   template/flambda_type.templ.ml
   rec_modules
   flambda_type.ml)))
